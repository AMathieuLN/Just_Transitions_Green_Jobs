"0","# Préparer les données : ajouter des variations annuelles et identifier les inflexions"
"0","evolution_data <- selected_outliers %>%"
"0","  arrange(iso3c, year) %>%"
"0","  group_by(iso3c) %>%"
"0","  mutate("
"0","    year = as.integer(year),  # Convertir les années en entiers pour supprimer les décimales"
"0","    annual_change = JTS - lag(JTS),  # Variation annuelle du score"
"0","    significant_change = ifelse(abs(annual_change) > 5, ""Inflexion"", ""Stable""),  # Seuil de variation significative"
"0","    income_group_label = case_when(  # Ajouter des labels textuels pour les groupes de revenu"
"0","      income_group_num == 1 ~ ""Revenu élevé"","
"0","      income_group_num == 2 ~ ""Revenu intermédiaire supérieur"","
"0","      income_group_num == 3 ~ ""Revenu intermédiaire inférieur"","
"0","      income_group_num == 4 ~ ""Faible revenu"""
"0","    ),"
"0","    country_label = paste0(iso3c, "" ("", income_group_label, "")"")  # Ajouter le nom du pays et groupe de revenu"
"0","  ) %>%"
"0","  filter(!is.na(significant_change))  # Supprimer les NA de ""Type de changement"""
"0","print(evolution_data)"
